import{j as r}from"./vendor-framer-B5q5H8HB.js";import{d as le,r as o}from"./vendor-react-DzKq_r11.js";const de="linear-gradient(145deg,#60496e8c 0%,#71C4FF44 100%)",A={INITIAL_DURATION:1200,INITIAL_X_OFFSET:70,INITIAL_Y_OFFSET:60,DEVICE_BETA_OFFSET:20,ENTER_TRANSITION_MS:180},j=(u,d=0,f=100)=>Math.min(Math.max(u,d),f),O=(u,d=3)=>parseFloat(u.toFixed(d)),V=(u,d,f,g,w)=>O(g+(w-g)*(u-d)/(f-d)),ue=({avatarUrl:u="<Placeholder for avatar URL>",iconUrl:d="<Placeholder for icon URL>",grainUrl:f="<Placeholder for grain URL>",innerGradient:g,behindGlowEnabled:w=!0,behindGlowColor:b,behindGlowSize:k,className:z="",enableTilt:y=!0,enableMobileTilt:$=!1,mobileTiltSensitivity:C=5,miniAvatarUrl:J,name:R="Javi A. Torres",title:K="Software Engineer",handle:Q="javicodes",status:Z="Online",contactText:G="Contact",showUserInfo:ee=!0,onContactClick:M})=>{const P=o.useRef(null),h=o.useRef(null),E=o.useRef(null),p=o.useRef(null),s=o.useMemo(()=>{if(!y)return null;let e=null,t=!1,n=0,c=0,a=0,l=0,m=0;const x=.14,I=.6;let _=0;const q=(i,v)=>{const N=h.current,T=P.current;if(!N||!T)return;const B=N.clientWidth||1,re=N.clientHeight||1,F=j(100/B*i),L=j(100/re*v),se=F-50,ce=L-50,ie={"--pointer-x":`${F}%`,"--pointer-y":`${L}%`,"--background-x":`${V(F,0,100,35,65)}%`,"--background-y":`${V(L,0,100,35,65)}%`,"--pointer-from-center":`${j(Math.hypot(L-50,F-50)/50,0,1)}`,"--pointer-from-top":`${L/100}`,"--pointer-from-left":`${F/100}`,"--rotate-x":`${O(-(se/5))}deg`,"--rotate-y":`${O(ce/4)}deg`};for(const[ae,oe]of Object.entries(ie))T.style.setProperty(ae,oe)},U=i=>{if(!t)return;n===0&&(n=i);const v=(i-n)/1e3;n=i;const N=i<_?I:x,T=1-Math.exp(-v/N);c+=(l-c)*T,a+=(m-a)*T,q(c,a),Math.abs(l-c)>.05||Math.abs(m-a)>.05||document.hasFocus()?e=requestAnimationFrame(U):(t=!1,n=0,e&&(cancelAnimationFrame(e),e=null))},W=()=>{t||(t=!0,n=0,e=requestAnimationFrame(U))};return{setImmediate(i,v){c=i,a=v,q(c,a)},setTarget(i,v){l=i,m=v,W()},toCenter(){const i=h.current;i&&this.setTarget(i.clientWidth/2,i.clientHeight/2)},beginInitial(i){_=performance.now()+i,W()},getCurrent(){return{x:c,y:a,tx:l,ty:m}},cancel(){e&&cancelAnimationFrame(e),e=null,t=!1,n=0}}},[y]),S=(e,t)=>{const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}},X=o.useCallback(e=>{const t=h.current;if(!t||!s)return;const{x:n,y:c}=S(e,t);s.setTarget(n,c)},[s]),Y=o.useCallback(e=>{const t=h.current;if(!t||!s)return;t.classList.add("active"),t.classList.add("entering"),E.current&&window.clearTimeout(E.current),E.current=window.setTimeout(()=>{t.classList.remove("entering")},A.ENTER_TRANSITION_MS);const{x:n,y:c}=S(e,t);s.setTarget(n,c)},[s]),D=o.useCallback(()=>{const e=h.current;if(!e||!s)return;s.toCenter();const t=()=>{const{x:n,y:c,tx:a,ty:l}=s.getCurrent();Math.hypot(a-n,l-c)<.6?(e.classList.remove("active"),p.current=null):p.current=requestAnimationFrame(t)};p.current&&cancelAnimationFrame(p.current),p.current=requestAnimationFrame(t)},[s]),H=o.useCallback(e=>{const t=h.current;if(!t||!s)return;const{beta:n,gamma:c}=e;if(n==null||c==null)return;const a=t.clientWidth/2,l=t.clientHeight/2,m=j(a+c*C,0,t.clientWidth),x=j(l+(n-A.DEVICE_BETA_OFFSET)*C,0,t.clientHeight);s.setTarget(m,x)},[s,C]);o.useEffect(()=>{if(!y||!s)return;const e=h.current;if(!e)return;const t=X,n=Y,c=D,a=H;e.addEventListener("pointerenter",n),e.addEventListener("pointermove",t),e.addEventListener("pointerleave",c);const l=()=>{if(!$||location.protocol!=="https:")return;const I=window.DeviceMotionEvent;I&&typeof I.requestPermission=="function"?I.requestPermission().then(_=>{_==="granted"&&window.addEventListener("deviceorientation",a)}).catch(console.error):window.addEventListener("deviceorientation",a)};e.addEventListener("click",l);const m=(e.clientWidth||0)-A.INITIAL_X_OFFSET,x=A.INITIAL_Y_OFFSET;return s.setImmediate(m,x),s.toCenter(),s.beginInitial(A.INITIAL_DURATION),()=>{e.removeEventListener("pointerenter",n),e.removeEventListener("pointermove",t),e.removeEventListener("pointerleave",c),e.removeEventListener("click",l),window.removeEventListener("deviceorientation",a),E.current&&window.clearTimeout(E.current),p.current&&cancelAnimationFrame(p.current),s.cancel(),e.classList.remove("entering")}},[y,$,s,X,Y,D,H]);const te=o.useMemo(()=>({"--icon":d?`url(${d})`:"none","--grain":f?`url(${f})`:"none","--inner-gradient":g??de,"--behind-glow-color":b??"rgba(125, 190, 255, 0.67)","--behind-glow-size":k??"50%"}),[d,f,g,b,k]),ne=o.useCallback(()=>{M?.()},[M]);return r.jsxs("div",{ref:P,className:`pc-card-wrapper ${z}`.trim(),style:te,children:[w&&r.jsx("div",{className:"pc-behind"}),r.jsx("div",{ref:h,className:"pc-card-shell",children:r.jsx("section",{className:"pc-card",children:r.jsxs("div",{className:"pc-inside",children:[r.jsx("div",{className:"pc-shine"}),r.jsx("div",{className:"pc-glare"}),r.jsxs("div",{className:"pc-content pc-avatar-content",children:[r.jsx("img",{className:"absolute left-1/2 bottom-0 w-[115%] h-[115%] object-contain -translate-x-[50%] backface-hidden will-change-transform transition-transform duration-[120ms] ease-out",src:u,alt:`${R||"User"} avatar`,loading:"lazy",onError:e=>{const t=e.target;t.style.display="none"}}),ee&&r.jsxs("div",{className:"pc-user-info",children:[r.jsxs("div",{className:"pc-user-details",children:[r.jsx("div",{className:"pc-mini-avatar",children:r.jsx("img",{src:J||u,alt:`${R||"User"} mini avatar`,loading:"lazy",onError:e=>{const t=e.target;t.style.opacity="0.5",t.src=u}})}),r.jsxs("div",{className:"pc-user-text",children:[r.jsxs("div",{className:"pc-handle",children:["@",Q]}),r.jsx("div",{className:"pc-status",children:Z})]})]}),r.jsx("button",{className:"pc-contact-btn",onClick:ne,style:{pointerEvents:"auto"},type:"button","aria-label":`Contact ${R||"user"}`,children:G})]})]}),r.jsx("div",{className:"pc-content",children:r.jsxs("div",{className:"pc-details",children:[r.jsx("h3",{children:R}),r.jsx("p",{children:K})]})})]})})})]})},fe=le.memo(ue);export{fe as P};
